üéØ TARGET FITUR (Sesuai Gambar & Modul)
Role

Admin

Create buku

Read buku

Update buku

Delete buku

Normal User

Read buku saja

Fitur

‚úÖ Login
‚úÖ Register (pilih role)
‚úÖ Middleware role admin
‚úÖ CRUD Buku
‚úÖ Tampilan berbeda Admin & User
‚úÖ Logout
‚úÖ Rating 1‚Äì5
‚úÖ Release Date

üß© TEKNOLOGI

PHP 8.x

Laravel 10

Bootstrap 5

MySQL

1Ô∏è‚É£ MEMBUAT PROJECT LARAVEL
composer create-project laravel/laravel perpus-cots
cd perpus-cots


Jalankan server:

php artisan serve

2Ô∏è‚É£ KONFIGURASI DATABASE

Edit .env

DB_DATABASE=perpus_cots
DB_USERNAME=root
DB_PASSWORD=


Buat database:

CREATE DATABASE perpus_cots;

3Ô∏è‚É£ AUTHENTICATION (LOGIN & REGISTER)

Gunakan Laravel Breeze (paling mudah & sesuai modul).

composer require laravel/breeze --dev
php artisan breeze:install
npm install
npm run build
php artisan migrate

4Ô∏è‚É£ TAMBAH ROLE PADA USER
Migration User

Edit file migration users

$table->string('role')->default('user');


Lalu migrate ulang:

php artisan migrate:fresh

5Ô∏è‚É£ MODEL & MIGRATION BUKU
php artisan make:model Book -m


Edit migration books:

Schema::create('books', function (Blueprint $table) {
    $table->id();
    $table->string('title');
    $table->text('description');
    $table->date('release_date');
    $table->integer('rating'); // 1‚Äì5
    $table->timestamps();
});

php artisan migrate

6Ô∏è‚É£ MODEL BOOK

app/Models/Book.php

class Book extends Model
{
    protected $fillable = [
        'title',
        'description',
        'release_date',
        'rating'
    ];
}

7Ô∏è‚É£ CONTROLLER AUTH (LOGIN, REGISTER, LOGOUT)

Laravel Breeze sudah menyediakan:

LoginController

RegisteredUserController

üëâ Tambahkan role di register

Edit RegisteredUserController:

User::create([
    'name' => $request->name,
    'email' => $request->email,
    'password' => Hash::make($request->password),
    'role' => $request->role
]);

8Ô∏è‚É£ VIEW REGISTER (PILIH ROLE)

resources/views/auth/register.blade.php

<div class="mb-3">
    <label>Role</label>
    <select name="role" class="form-control">
        <option value="user">Normal User</option>
        <option value="admin">Admin</option>
    </select>
</div>


‚úÖ Sesuai gambar Register

9Ô∏è‚É£ CONTROLLER BUKU (CRUD)
php artisan make:controller BookController


app/Http/Controllers/BookController.php

class BookController extends Controller
{
    public function index()
    {
        $books = Book::all();
        return view('home', compact('books'));
    }

    public function store(Request $request)
    {
        Book::create($request->all());
        return back()->with('success', 'Book created successfully');
    }

    public function update(Request $request, $id)
    {
        Book::find($id)->update($request->all());
        return back()->with('success', 'Book updated successfully');
    }

    public function destroy($id)
    {
        Book::find($id)->delete();
        return back()->with('success', 'Book deleted successfully');
    }
}

üîê 10Ô∏è‚É£ MIDDLEWARE ROLE ADMIN
php artisan make:middleware AdminMiddleware


app/Http/Middleware/AdminMiddleware.php

public function handle($request, Closure $next)
{
    if (auth()->user()->role !== 'admin') {
        abort(403);
    }
    return $next($request);
}

Register Middleware

bootstrap/app.php

'admin' => \App\Http\Middleware\AdminMiddleware::class,

üõ£Ô∏è 11Ô∏è‚É£ ROUTES

routes/web.php

Route::get('/', [BookController::class, 'index'])->middleware('auth');

Route::post('/books', [BookController::class, 'store'])
    ->middleware(['auth','admin']);

Route::put('/books/{id}', [BookController::class, 'update'])
    ->middleware(['auth','admin']);

Route::delete('/books/{id}', [BookController::class, 'destroy'])
    ->middleware(['auth','admin']);

üñ•Ô∏è 12Ô∏è‚É£ VIEW HOME (ADMIN & USER)

resources/views/home.blade.php

<h2>Perpustakaan Tertutup</h2>

@if(auth()->user()->role == 'admin')
<form method="POST" action="/books">
    @csrf
    <input name="title" placeholder="Title">
    <input name="description" placeholder="Description">
    <input type="date" name="release_date">
    <input type="number" name="rating" min="1" max="5">
    <button>Add Book</button>
</form>
@endif

<table>
@foreach($books as $book)
<tr>
<td>{{ $book->title }}</td>
<td>{{ $book->description }}</td>
<td>{{ $book->release_date }}</td>
<td>{{ $book->rating }}</td>

@if(auth()->user()->role == 'admin')
<td>
<form method="POST" action="/books/{{ $book->id }}">
@csrf
@method('DELETE')
<button>Delete</button>
</form>
</td>
@endif

</tr>
@endforeach
</table>


‚úÖ Admin bisa CRUD
‚úÖ User hanya Read

üö™ 13Ô∏è‚É£ LOGOUT

Sudah otomatis dari Breeze:

<form method="POST" action="{{ route('logout') }}">
@csrf
<button>Logout</button>
</form>
